<!-- <h1 mat-dialog-title>Upload File</h1> -->
<div style="height: 80vh !important;">
<div  style="height: 80vh !important; margin: 2vh;">
    <form  [formGroup] = "file_list">    
        <mat-form-field appearance="outline" style="margin-top: 1%; width: 100%;">
            <mat-label>Email</mat-label>
            <input matInput placeholder="Provide Email " [formControl]="myControl" [matAutocomplete]="auto">
                <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
                    <mat-option *ngFor="let option of filteredOptions | async" [value]="option.split('//')[1]">
                        {{option.split("//")[0]}}
                    </mat-option>
                  </mat-autocomplete>
        </mat-form-field>

        <mat-form-field appearance="outline" style="margin-top: 1%; width: 100%;">
            <mat-label>Purpose</mat-label>
            <mat-select formControlName="purpose" placeholder="Purpose of uploading">
                <mat-option value="GST">GST</mat-option>
                <mat-option value="ITR">Income Tax Returns</mat-option>
                <mat-option value="TDS"> Tds/Tcs</mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" style="margin-top: 1%; width: 100%;">
            <mat-label>Name of the file</mat-label>
            <input formControlName="filename" matInput placeholder="Provide File Name">
          </mat-form-field>

        <mat-form-field *ngIf="!(file_list.value.purpose == 'TDS' || file_list.value.purpose == 'GST')" appearance="outline" style="margin-top: 1%; width: 100%;">
            <mat-label>Financial Year</mat-label>
            <mat-select formControlName="fy" placeholder="F.Y">
                <mat-option *ngFor="let year of years" [value]="year">{{ year }} </mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field *ngIf="file_list.value.purpose == 'TDS' || file_list.value.purpose == 'GST'" appearance="outline" style="margin-top: 1%; width: 56%; margin-right: 1%;">
            <mat-label>Financial Year</mat-label>
            <mat-select formControlName="fy" placeholder="F.Y"> <!-- formControlName="purpose" placeholder="Purpose of uploading"> -->
                <mat-option *ngFor="let year of years" [value]="year">{{ year }} </mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field *ngIf="file_list.value.purpose == 'TDS' " appearance="outline" style="width: 40%;">
            <mat-label>Quarter</mat-label>
            <mat-select formControlName="month_quarter" placeholder="Quarter"> <!-- formControlName="purpose" placeholder="Purpose of uploading"> -->
                <mat-option value="Q1">Q1</mat-option>
                <mat-option value="Q2">Q2</mat-option>
                <mat-option value="Q3">Q3</mat-option>
                <mat-option value="Q4">Q4</mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field *ngIf="file_list.value.purpose == 'GST' " appearance="outline" style=" width: 40%;">
            <mat-label>Month</mat-label>
            <mat-select formControlName="month_quarter" placeholder="Month"> <!-- formControlName="purpose" placeholder="Purpose of uploading"> -->
                <mat-option value="Apr">Apr</mat-option>
                <mat-option value="Jun">Jun</mat-option>
                <mat-option value="Jul">Jul</mat-option>
                <mat-option value="Aug">Aug</mat-option>
                <mat-option value="Sep">Sep</mat-option>
                <mat-option value="Oct">Oct</mat-option>
                <mat-option value="Nov">Nov</mat-option>
                <mat-option value="Dec">Dec</mat-option>
                <mat-option value="Jan">Jan</mat-option>
                <mat-option value="Feb">Feb</mat-option>
                <mat-option value="Mar">Mar</mat-option>
            </mat-select>
        </mat-form-field>        
          
        <mat-form-field appearance="outline" style="margin-top: 1%; width: 100%;">
            <mat-label>Comments</mat-label>
            <textarea formControlName="comments" matInput placeholder="Comment about the file"></textarea>
        </mat-form-field>
       
    
        <input type="file" class="file-input" (change)="upload($event)" multiple #fileUpload>
        <div mat-dialog-action [align]="'center'" class="file-upload" style="margin-bottom: 0%;">
            <!-- {{fileName || "No file uploaded yet."}} -->
            <button mat-mini-fab color="primary" class="upload-btn"
            (click)="fileUpload.click()">
                <mat-icon>attach_file</mat-icon>
            </button>
        </div>

        <span style="font-size:10px ; color: blue;"> *Mutltiple files can be uploaded </span> <br>
        <span *ngIf="this.size_files > 9000000" style="font-size:20px ; color: red;"> *Total File size < 9Mb </span>
        <table mat-table [dataSource]="dataSource" matSort>
            <ng-container matColumnDef="files_uploaded">
                <!-- <th mat-header-cell *matHeaderCellDef> </th> -->
            <td mat-cell *matCellDef="let row"> 
                {{row.files_uploaded.slice(0,30)}}
            </td>
            </ng-container>

        
            <!-- <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr> -->
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        
        </table>
   
    <div mat-dialog-action [align]="'center'" style="margin-top: 5%;">
        <button *ngIf="this.size_files <= 9000000" mat-raised-button color="warn" style=" margin-right: 4%; width: 45%;" (click) = "AddProduct()">{{actionBtn}}</button>
        <button *ngIf="this.size_files > 9000000" disabled="true" mat-raised-button color="warn" style=" margin-right: 4%; width: 45%;" (click) = "AddProduct()">{{actionBtn}}</button>
        <button mat-raised-button color="primary" style="width: 45%" mat-dialog-close>Close</button>
    </div>
</form>
</div>      
</div>



