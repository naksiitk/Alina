<h1 mat-dialog-title>Ask for a file</h1>
<div mat-dialog-content>
    <form [formGroup] = "file_list">
        <mat-form-field appearance="outline" style="margin-top: 1%; width: 100%;">
            <mat-label>The File Related to</mat-label>
            <mat-select formControlName="purpose" placeholder="Purpose File Related to">
                <mat-option value="GST">GST</mat-option>
                <mat-option value="ITR">Income Tax Returns</mat-option>
                <mat-option value="TDS"> Tds/Tcs</mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" style="margin-top: 1%; width: 100%;">
            <mat-label>File Name to be asked</mat-label>
            <input formControlName="filename" matInput placeholder="Provide File Name">
          </mat-form-field>

        <mat-form-field *ngIf="!(file_list.value.purpose == 'TDS' || file_list.value.purpose == 'GST')" appearance="outline" style="margin-top: 1%; width: 100%;">
            <mat-label>Financial Year</mat-label>
            <mat-select formControlName="fy" placeholder="F.Y">
                <mat-option *ngFor="let year of years" [value]="year">{{ year }} </mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field *ngIf="file_list.value.purpose == 'TDS' || file_list.value.purpose == 'GST'" appearance="outline" style="margin-top: 1%; width: 56%; margin-right: 1%;">
            <mat-label>Financial Year</mat-label>
            <mat-select formControlName="fy" placeholder="F.Y"> <!-- formControlName="purpose" placeholder="Purpose of uploading"> -->
                <mat-option *ngFor="let year of years" [value]="year">{{ year }} </mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field *ngIf="file_list.value.purpose == 'TDS' " appearance="outline" style="width: 40%;">
            <mat-label>Quarter</mat-label>
            <mat-select formControlName="month_quarter" placeholder="Quarter"> <!-- formControlName="purpose" placeholder="Purpose of uploading"> -->
                <mat-option value="Q1">Q1</mat-option>
                <mat-option value="Q2">Q2</mat-option>
                <mat-option value="Q3">Q3</mat-option>
                <mat-option value="Q4">Q4</mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field *ngIf="file_list.value.purpose == 'GST' " appearance="outline" style=" width: 40%;">
            <mat-label>Month</mat-label>
            <mat-select formControlName="month_quarter" placeholder="Month"> <!-- formControlName="purpose" placeholder="Purpose of uploading"> -->
                <mat-option value="Apr">Apr</mat-option>
                <mat-option value="Jun">Jun</mat-option>
                <mat-option value="Jul">Jul</mat-option>
                <mat-option value="Aug">Aug</mat-option>
                <mat-option value="Sep">Sep</mat-option>
                <mat-option value="Oct">Oct</mat-option>
                <mat-option value="Nov">Nov</mat-option>
                <mat-option value="Dec">Dec</mat-option>
                <mat-option value="Jan">Jan</mat-option>
                <mat-option value="Feb">Feb</mat-option>
                <mat-option value="Mar">Mar</mat-option>
            </mat-select>
        </mat-form-field>
          <mat-form-field appearance="outline" style="margin-top: 1%; width: 100%;">
              <mat-label>Comments</mat-label>
              <textarea formControlName="comments" matInput placeholder="Comment about the file"></textarea>
              </mat-form-field>
          <!-- <div mat-dialog-action [align]="'center'">
              <textarea formControlName="files_uploaded" mat-raised-button color="basic" style="width: 100%; margin-bottom: 6%;">Upload File</textarea>
          </div> -->
    </form>

    <input type="file" class="file-input" (change)="upload($event)" multiple #fileUpload>
        <div *ngIf="files_asked_upload == 1" mat-dialog-action [align]="'center'" class="file-upload" style="margin-bottom: 0%;">
            <!-- {{fileName || "No file uploaded yet."}} -->
            <button mat-mini-fab color="primary" class="upload-btn"
            (click)="fileUpload.click()">
                <mat-icon>attach_file</mat-icon>
            </button>
        </div>

        <table *ngIf="files_asked_upload == 1" mat-table [dataSource]="dataSource" matSort>
            <ng-container matColumnDef="files_uploaded">
                <th mat-header-cell *matHeaderCellDef> </th>
            <td mat-cell *matCellDef="let row"> 
                {{row.files_uploaded.slice(0,30)}}
            </td>
            </ng-container>
        
            <!-- <ng-container  matColumnDef="Action">
            <th mat-header-cell *matHeaderCellDef> </th>
            <td mat-cell *matCellDef="let row"> 
                <button [disabled]="row.lock" mat-button color="warn"><mat-icon>delete</mat-icon></button> 
            </td>     
            </ng-container> -->
        
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        
        </table>

    <div mat-dialog-action [align]="'center'">
        <button mat-raised-button color="warn" style="margin-right: 4%; width: 45%;" (click) = "AddProduct()">{{actionBtn}}</button>
        <button mat-raised-button color="primary" style="width: 45%" mat-dialog-close>Close</button>
    </div>
            
</div>



